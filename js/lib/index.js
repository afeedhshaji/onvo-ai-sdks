"use strict";var T=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var I=Object.prototype.hasOwnProperty;var R=(a,s)=>{for(var e in s)T(a,e,{get:s[e],enumerable:!0})},M=(a,s,e,r)=>{if(s&&typeof s=="object"||typeof s=="function")for(let i of k(s))!I.call(a,i)&&i!==e&&T(a,i,{get:()=>s[i],enumerable:!(r=A(s,i))||r.enumerable});return a};var W=a=>M(T({},"__esModule",{value:!0}),a);var U={};R(U,{Onvo:()=>O,Table:()=>v,default:()=>L});module.exports=W(U);var t=class{#s;endpoint;async fetchBase(s,e,r,i){try{let n={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"};this.#s&&this.#s.trim()!==""&&(n["x-api-key"]=this.#s),i||(n["Content-Type"]="application/json");let E=await fetch(this.endpoint+s,{method:e||"GET",headers:n,body:i?r:r?JSON.stringify(r):void 0});if(!E.ok){let C=await E.text();throw new Error(C)}return await E.json()}catch(n){throw new Error("Error in making the request: "+n.message)}}async fetchBlob(s){try{let e={"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"};return this.#s&&this.#s.trim()!==""&&(e["x-api-key"]=this.#s),await fetch(this.endpoint+s,{method:"GET",headers:e}).then(i=>i.blob())}catch(e){throw new Error("Error in making the request: "+e.message)}}constructor(s,e){if(s==null)throw new Error("API key is required");this.#s=s,this.endpoint=e?.endpoint||"https://dashboard.onvo.ai"}};var d=class extends t{list(){return this.fetchBase("/api/accounts")}get(s){return this.fetchBase("/api/accounts/"+s)}};var u=class extends t{list(){return this.fetchBase("/api/teams")}get(s){return this.fetchBase("/api/teams/"+s)}update(s,e){return this.fetchBase("/api/teams/"+s,"POST",e)}};var m=class extends t{list(){return this.fetchBase("/api/embed-users")}get(s){return this.fetchBase("/api/embed-users/"+s)}delete(s){return this.fetchBase("/api/embed-users/"+s,"DELETE")}upsert(s,e){return this.fetchBase("/api/embed-users","POST",{id:s,name:e.name,email:e.email,metadata:e.metadata})}};var c=class extends t{list(s){return s&&s.dashboard?this.fetchBase("/api/datasources?dashboard="+s.dashboard):this.fetchBase("/api/datasources")}get(s){return this.fetchBase("/api/datasources/"+s)}delete(s){return this.fetchBase("/api/datasources/"+s,"DELETE")}update(s,e){return this.fetchBase("/api/datasources/"+s,"POST",e)}create(s){return this.fetchBase("/api/datasources","PUT",s)}};var h=class extends t{list(){return this.fetchBase("/api/automations")}get(s){return this.fetchBase("/api/automations/"+s)}delete(s){return this.fetchBase("/api/automations/"+s,"DELETE")}update(s,e){return this.fetchBase("/api/automations/"+s,"POST",e)}create(s){return this.fetchBase("/api/automations","PUT",s)}};var p=class extends t{list(){return this.fetchBase("/api/dashboards")}get(s){return this.fetchBase("/api/dashboards/"+s)}delete(s){return this.fetchBase("/api/dashboards/"+s,"DELETE")}update(s,e){return this.fetchBase("/api/dashboards/"+s,"POST",e)}create(s){return this.fetchBase("/api/dashboards","PUT",s)}};var g=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}unlink(s){return this.fetchBase("/api/dashboards/"+this.#s+"/datasources/"+s,"DELETE")}link(s){return this.fetchBase("/api/dashboards/"+this.#s+"/datasources","PUT",{datasourceId:s})}linkMultiple(s){return this.fetchBase("/api/dashboards/"+this.#s+"/datasources","PUT",{datasourceIds:s})}};var b=class extends t{datasources;#s;constructor(s,e,r){super(e,r),this.#s=s,this.datasources=new g(s,e,r)}updateWidgetCache(){return this.fetchBase("/api/dashboards/"+this.#s+"/update-cache","POST")}export(s){return this.fetchBlob("/api/dashboards/"+this.#s+"/export?format="+s)}summarize(s){return this.fetchBase(`/api/dashboards/${this.#s}/summarize`,"POST",{prompt:s})}};var l=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}getAccessToken(){return this.fetchBase("/api/embed-users/"+this.#s+"/token")}};var f=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}initialize(){return this.fetchBase("/api/datasources/"+this.#s+"/initialize")}uploadFile(s){let e=new FormData;return e.set("file",s),this.fetchBase("/api/datasources/"+this.#s+"/upload-file","POST",e,!0)}};var P=class extends t{list(s){return this.fetchBase("/api/questions?dashboard="+s.dashboard)}create(s){return this.fetchBase("/api/questions","POST",{dashboard:s.dashboardId,id:s.questionId||void 0,messages:s.messages})}delete(s){return this.fetchBase("/api/questions/"+s,"DELETE")}update(s,e){return this.fetchBase("/api/questions/"+s,"POST",e)}};var D=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}getRuns(){return this.fetchBase("/api/automations/"+this.#s+"/runs")}};var _=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}export(s){return this.fetchBlob("/api/widgets/"+this.#s+"/export?format="+s)}updatePrompts(s){return this.fetchBase("/api/widgets/"+this.#s,"PATCH",{messages:s})}executeCode(s){return this.fetchBase("/api/widgets/"+this.#s+"/execute-code","POST",{code:s})}};var x=class extends t{list(s){return s.embed_user?this.fetchBase("/api/sessions?embed_user="+s.embed_user):this.fetchBase("/api/sessions?parent_dashboard="+s.parent_dashboard)}get(s){return this.fetchBase("/api/sessions?dashboard="+s.dashboard)}revoke(s){return this.fetchBase("/api/sessions?dashboard="+s.dashboard,"DELETE")}revokeAll(s){return this.fetchBase("/api/sessions?parent_dashboard="+s.parent_dashboard,"DELETE")}async upsert({embed_user:s,parent_dashboard:e,parameters:r}){return await this.fetchBase("/api/sessions","POST",{user:s,parameters:r,dashboard:e})}};var w=class extends t{list(s){return this.fetchBase(`/api/widgets?dashboard=${s.dashboard}&use_in_library=${s.use_in_library}`)}get(s){return this.fetchBase("/api/widgets/"+s)}delete(s){return this.fetchBase("/api/widgets/"+s,"DELETE")}update(s,e){return this.fetchBase("/api/widgets/"+s,"POST",e)}create(s){return this.fetchBase("/api/widgets","PUT",s)}};var B=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}export(s,e){return this.fetchBlob(`/api/questions/${this.#s}/export?format=${e}&messageIndex=${s}`)}};var S=class extends t{async uploadFile(s){let e=new FormData;return e.set("file",s),this.fetchBase("/api/utils/upload-file","POST",e,!0)}};var y=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}getSubscription(){return this.fetchBase("/api/teams/"+this.#s+"/subscription")}};var v=(o=>(o.Countries="countries",o.Invites="invites",o.ItineraryInvites="itinerary_invites",o.Itineraries="itineraries",o.Members="members",o.Teams="teams",o.Travelers="travelers",o.Accounts="accounts",o.DataSources="datasources",o.EmbedUsers="embed_users",o.APIKeys="api_keys",o.Widgets="widgets",o.Dashboards="dashboards",o.DashboardDatasources="dashboard_datasources",o.Sessions="sessions",o.Questions="questions",o.Integrations="integrations",o.DecryptedIntegrations="decrypted_integrations",o.DecryptedSessions="decrypted_sessions",o.DecryptedWidgets="decrypted_widgets",o.DecryptedDatasources="decrypted_datasources",o.Subscriptions="subscriptions",o.SubscriptionPlans="subscription_plans",o.Automations="automations",o.AutomationRuns="automation_runs",o.Logs="logs",o))(v||{});var O=class extends t{accounts;teams;embed_users;datasources;automations;dashboards;questions;widgets;sessions;utils;automation;dashboard;embed_user;datasource;widget;question;team;constructor(s,e){super(s,e),this.accounts=new d(s,e),this.teams=new u(s,e),this.embed_users=new m(s,e),this.datasources=new c(s,e),this.automations=new h(s,e),this.dashboards=new p(s,e),this.questions=new P(s,e),this.sessions=new x(s,e),this.widgets=new w(s,e),this.utils=new S(s,e),this.dashboard=r=>new b(r,s,e),this.embed_user=r=>new l(r,s,e),this.datasource=r=>new f(r,s,e),this.automation=r=>new D(r,s,e),this.widget=r=>new _(r,s,e),this.question=r=>new B(r,s,e),this.team=r=>new y(r,s,e)}},L=O;0&&(module.exports={Onvo,Table});
//# sourceMappingURL=index.js.map